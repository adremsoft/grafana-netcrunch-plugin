{"version":3,"sources":["../../../../../../src/datasource/services/netCrunchAPI/netCrunchConnection/networkData/networkNode.js"],"names":["MAP_ICON_ID_UNKNOWN","ICON_SIZE","DEVICE_TYPES","PRIVATE_PROPERTIES","local","Symbol","values","NetCrunchNetworkNode","nodeRec","netCrunchServerConnection","deviceType","parseDeviceType","getValues","DeviceType","Object","assign","iconUrl","getIconUrl","iconId","deviceTypePattern","pattern","toUpperCase","length","classId","some","categoryId","Id","Name","Address","GlobalDataNode","data","xml","window","DOMParser","parseFromString","e","subCategoryId","manufacturerId","deviceTypeXML","doc","parseXML","getElementsByTagName","createDeviceType","getAttribute","serverConnection","ncSrv","IMapIcons","GetIcon","asURL","Client","urlFilter"],"mappings":"20BAYEA,mB,CAAsB,G,CACtBC,S,CAAY,E,CACZC,Y,4MAcAC,kB,CAAqB,CACnBC,MAAOC,OAAO,OAAP,CADY,CAEnBC,OAAQD,OAAO,QAAP,CAFW,C,gCAKjBE,oB,YAEJ,8BAAYC,CAAZ,CAAqBC,CAArB,CAAgD,4CAC9C,GACEC,GAAaH,qBAAqBI,eAArB,CAAqCH,EAAQI,SAAR,GAAoBC,UAAzD,CADf,CAGA,KAAKV,mBAAmBG,MAAxB,EAAkCE,EAAQI,SAAR,EAJY,CAK9C,KAAKT,mBAAmBC,KAAxB,EAAiCU,OAAOC,MAAP,IAAkBL,CAAlB,CALa,CAM9C,KAAKP,mBAAmBC,KAAxB,EAA+BY,OAA/B,CACET,qBAAqBU,UAArB,CAAgCP,EAAWQ,MAA3C,CAAmDT,CAAnD,CACH,C,gGA2EeU,C,CAAmB,gBAC3BC,EAAUlB,aAAaiB,EAAkBE,WAAlB,EAAb,CADiB,OAGjB,KAAX,GAAD,EAAyC,CAAnB,KAAQC,MAHD,EAItB,KAAKnB,mBAAmBC,KAAxB,EAA+BmB,OAA/B,GAAkDH,EAAQ,CAAR,CAAlD,GAAD,EACCA,EAAQ,CAAR,EAAWI,IAAX,CAAgB,kBAAe,OAAKrB,mBAAmBC,KAAxB,EAA+BqB,UAA/B,GAAqDA,CAArD,GAAf,CAAhB,CAIZ,C,8BAlFQ,CACP,MAAO,MAAKtB,mBAAmBG,MAAxB,EAAgCoB,EACxC,C,gCAEU,CACT,MAAO,MAAKvB,mBAAmBG,MAAxB,EAAgCqB,IACxC,C,mCAEa,CACZ,MAAO,MAAKxB,mBAAmBG,MAAxB,EAAgCsB,OACxC,C,0CAEoB,CACnB,MAAO,MAAKzB,mBAAmBG,MAAxB,EAAgCuB,cACxC,C,mCAEa,CACZ,MAAO,MAAK1B,mBAAmBC,KAAxB,EAA+BY,OACvC,C,4CAEec,C,CAAM,CACpB,GAAIC,SAAJ,CAEA,GAAI,CAACD,CAAD,EAAyB,QAAhB,QAAOA,EAApB,CACE,MAAO,KAAP,CAGF,GAAI,CACFC,EAAO,GAAIC,QAAOC,SAAX,EAAD,CAAyBC,eAAzB,CAAyCJ,CAAzC,CAA+C,UAA/C,CACP,CAAC,MAAOK,CAAP,CAAU,CACVJ,QACD,CAED,MAAOA,EACR,C,2DAEuF,IAAhEb,EAAgE,wDAAvD,CAAuD,CAApDK,CAAoD,cAA3CE,CAA2C,cAA/BW,CAA+B,cAAhBC,CAAgB,cACtF,MAAO,CACLnB,QADK,CAELK,SAFK,CAGLE,YAHK,CAILW,eAJK,CAKLC,gBALK,CAOR,C,wDAEsBC,C,CAAe,CAEpC,GAAuB,EAAlB,IAAD,EAA4C,IAAjB,GAA/B,CAAuD,CACrD,GACEC,GAAMhC,qBAAqBiC,QAArB,CAA8BF,CAA9B,CADR,CAEE5B,EAAa6B,EAAIE,oBAAJ,CAAyB,SAAzB,CAFf,CADqD,MAKhC,KAAjB,IAAW,CAAX,CALiD,CAc9ClC,qBAAqBmC,gBAArB,EAd8C,CAM5CnC,qBAAqBmC,gBAArB,CACLhC,EAAW,CAAX,EAAciC,YAAd,CAA2B,QAA3B,GAAwC3C,mBADnC,CAELU,EAAW,CAAX,EAAciC,YAAd,CAA2B,SAA3B,CAFK,CAGLjC,EAAW,CAAX,EAAciC,YAAd,CAA2B,YAA3B,CAHK,CAILjC,EAAW,CAAX,EAAciC,YAAd,CAA2B,eAA3B,CAJK,CAKLjC,EAAW,CAAX,EAAciC,YAAd,CAA2B,gBAA3B,CALK,CASV,CAED,MAAOpC,sBAAqBmC,gBAArB,EACR,C,8CAEiBxB,C,CAAQ0B,C,CAAkB,CAC1C,GAAM5B,GAAU4B,EAAiBC,KAAjB,CAAuBC,SAAvB,CAAiCC,OAAjC,CAAyCC,KAAzC,CAA+C9B,CAA/C,CAAuDjB,SAAvD,CAAkE,IAAlE,CAAhB,CACA,MAAO2C,GAAiBK,MAAjB,CAAwBC,SAAxB,CAAkClC,CAAlC,CACR,C,4DAgBDT,oB","file":"networkNode.js","sourcesContent":["/**\r\n * @license\r\n * Copyright AdRem Software. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an Apache License, Version 2.0 that can be\r\n * found in the LICENSE file.\r\n */\r\n\r\n/* global window */\r\n/* eslint-disable quote-props */\r\n\r\nconst\r\n  MAP_ICON_ID_UNKNOWN = 100,\r\n  ICON_SIZE = 25,\r\n  DEVICE_TYPES = {\r\n    'WINDOWS': [1, [1, 2]],\r\n    'WINDOWS.SERVER': [1, [1]],\r\n    'WINDOWS.WORKSTATION': [1, [2]],\r\n    'NOVELL': [1, [3]],\r\n    'LINUX': [1, [4]],\r\n    'UNIX': [1, [5]],\r\n    'SOLARIS': [1, [6]],\r\n    'BSD': [1, [7]],\r\n    'IBM': [1, [8]],\r\n    'MACOS': [1, [9]],\r\n    'ESX': [1, [10]],\r\n    'XENSERVER': [1, [11]]\r\n  },\r\n  PRIVATE_PROPERTIES = {\r\n    local: Symbol('local'),\r\n    values: Symbol('values')\r\n  };\r\n\r\nclass NetCrunchNetworkNode {\r\n\r\n  constructor(nodeRec, netCrunchServerConnection) {\r\n    const\r\n      deviceType = NetCrunchNetworkNode.parseDeviceType(nodeRec.getValues().DeviceType);\r\n\r\n    this[PRIVATE_PROPERTIES.values] = nodeRec.getValues();\r\n    this[PRIVATE_PROPERTIES.local] = Object.assign({}, deviceType);\r\n    this[PRIVATE_PROPERTIES.local].iconUrl =\r\n      NetCrunchNetworkNode.getIconUrl(deviceType.iconId, netCrunchServerConnection);\r\n  }\r\n\r\n  get id() {\r\n    return this[PRIVATE_PROPERTIES.values].Id;\r\n  }\r\n\r\n  get name() {\r\n    return this[PRIVATE_PROPERTIES.values].Name;\r\n  }\r\n\r\n  get address() {\r\n    return this[PRIVATE_PROPERTIES.values].Address;\r\n  }\r\n\r\n  get globalDataNode() {\r\n    return this[PRIVATE_PROPERTIES.values].GlobalDataNode;\r\n  }\r\n\r\n  get iconUrl() {\r\n    return this[PRIVATE_PROPERTIES.local].iconUrl;\r\n  }\r\n\r\n  static parseXML(data) {\r\n    let xml;\r\n\r\n    if (!data || typeof data !== 'string') {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      xml = (new window.DOMParser()).parseFromString(data, 'text/xml');\r\n    } catch (e) {\r\n      xml = undefined;\r\n    }\r\n\r\n    return xml;\r\n  }\r\n\r\n  static createDeviceType(iconId = 0, classId, categoryId, subCategoryId, manufacturerId) {\r\n    return {\r\n      iconId,\r\n      classId,\r\n      categoryId,\r\n      subCategoryId,\r\n      manufacturerId\r\n    };\r\n  }\r\n\r\n  static parseDeviceType(deviceTypeXML) {\r\n\r\n    if ((deviceTypeXML !== '') && (deviceTypeXML != null)) {\r\n      const\r\n        doc = NetCrunchNetworkNode.parseXML(deviceTypeXML),\r\n        deviceType = doc.getElementsByTagName('devtype');\r\n\r\n      if (deviceType[0] != null) {\r\n        return NetCrunchNetworkNode.createDeviceType(\r\n          deviceType[0].getAttribute('iconid') || MAP_ICON_ID_UNKNOWN,\r\n          deviceType[0].getAttribute('classid'),\r\n          deviceType[0].getAttribute('CategoryId'),\r\n          deviceType[0].getAttribute('SubCategoryId'),\r\n          deviceType[0].getAttribute('ManufacturerId')\r\n        );\r\n      }\r\n      return NetCrunchNetworkNode.createDeviceType();\r\n    }\r\n\r\n    return NetCrunchNetworkNode.createDeviceType();\r\n  }\r\n\r\n  static getIconUrl(iconId, serverConnection) {\r\n    const iconUrl = serverConnection.ncSrv.IMapIcons.GetIcon.asURL(iconId, ICON_SIZE, 'ok');\r\n    return serverConnection.Client.urlFilter(iconUrl);\r\n  }\r\n\r\n  checkDeviceType(deviceTypePattern) {\r\n    const pattern = DEVICE_TYPES[deviceTypePattern.toUpperCase()];\r\n\r\n    if ((pattern != null) && (pattern.length === 2)) {\r\n      return ((this[PRIVATE_PROPERTIES.local].classId === String(pattern[0])) &&\r\n               pattern[1].some(categoryId => (this[PRIVATE_PROPERTIES.local].categoryId === String(categoryId))));\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  NetCrunchNetworkNode\r\n};\r\n"]}