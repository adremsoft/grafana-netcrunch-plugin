{"version":3,"sources":["../../../src/datasource/directives/ncSpinner.directive.js"],"names":["angular","imagesURL","directivesModule","PRIVATE_PROPERTIES","showTimer","Symbol","spinnerState","timeout","NC_SPINNER_CONTROLLER_DI","NcSpinnerController","$scope","$timeout","$watch","showTrigger","showSpinner","hideSpinner","spinnerOnChange","state","delay","cancel","spinnerDelay","isNumber","$inject","NcSpinner","restrict","scope","spinnerShowTrigger","template","controller","controllerAs","bindToController","module","directive"],"mappings":"4YAQOA,O,qCACEC,S,SAAAA,S,CAAWC,gB,SAAAA,gB,kgBAGlBC,kB,CAAqB,CACnBC,UAAWC,OAAO,WAAP,CADQ,CAEnBC,aAAcD,OAAO,cAAP,CAFK,CAGnBE,QAASF,OAAO,SAAP,CAHU,C,CAKrBG,wB,uBAEIC,mB,YAEJ,6BAAYC,CAAZ,CAAoBC,CAApB,CAA8B,0DAE5B,KAAKR,mBAAmBC,SAAxB,EAAqC,IAFT,CAG5B,KAAKD,mBAAmBG,YAAxB,IAH4B,CAI5B,KAAKH,mBAAmBI,OAAxB,EAAmCI,CAJP,CAM5BD,EAAOE,MAAP,CAAc,kCAAd,CAAkD,SAACC,CAAD,CAAiB,CAC7DA,CAD6D,CAE/D,MAAKC,WAAL,EAF+D,CAI/D,MAAKC,WAAL,EAEH,CAND,CAQD,C,wFAEa,iBACNR,EAAU,KAAKJ,mBAAmBI,OAAxB,CADJ,CAG+B,IAAvC,QAAKJ,mBAAmBC,SAAxB,CAHQ,GAIV,KAAKD,mBAAmBC,SAAxB,EAAqCG,EAAQ,UAAM,CACjD,OAAKJ,mBAAmBG,YAAxB,IADiD,CAEjD,OAAKH,mBAAmBC,SAAxB,EAAqC,IAFY,CAGjD,OAAKY,eAAL,CAAqB,CAAEC,QAAF,CAArB,CACD,CAJoC,CAIlC,KAAKC,KAJ6B,CAJ3B,CAUb,C,iDAEa,CACZ,GACEd,GAAY,KAAKD,mBAAmBC,SAAxB,CADd,CAEEG,EAAU,KAAKJ,mBAAmBI,OAAxB,CAFZ,CAIiB,IAAb,GALQ,GAMVA,EAAQY,MAAR,CAAef,CAAf,CANU,CAOV,KAAKD,mBAAmBC,SAAxB,EAAqC,IAP3B,EAUZ,KAAKD,mBAAmBG,YAAxB,IAVY,CAWZ,KAAKU,eAAL,CAAqB,CAAEC,QAAF,CAArB,CACD,C,iCAEW,CACV,GAAMC,IAAe,KAAKE,YAA1B,CACA,MAAOpB,SAAQqB,QAAR,CAAiBH,CAAjB,EAA0BA,CAA1B,CAAkC,GAC1C,C,wCAEkB,CACjB,MAAO,MAAKf,mBAAmBG,YAAxB,CACR,C,2BAIHG,oBAAoBa,OAApB,CAA8Bd,wB,CAExBe,S,CAEJ,oBAAc,iCAEZ,KAAKC,QAAL,CAAgB,GAFJ,CAIZ,KAAKC,KAAL,CAAa,CACXC,mBAAoB,GADT,CAEXN,aAAc,GAFH,CAGXJ,gBAAiB,GAHN,CAJD,CAUZ,KAAKW,QAAL,6FAEe1B,SAFf,qCAVY,CAgBZ,KAAK2B,UAAL,CAAkBnB,mBAhBN,CAiBZ,KAAKoB,YAAL,CAAoB,eAjBR,CAkBZ,KAAKC,gBAAL,GAED,C,CAIH9B,QACG+B,MADH,CACU7B,gBADV,EAEK8B,SAFL,CAEe,WAFf,CAE4B,iBAAM,IAAIT,UAAV,CAF5B,C","file":"ncSpinner.directive.js","sourcesContent":["/**\n * @license\n * Copyright AdRem Software. All Rights Reserved.\n *\n * Use of this source code is governed by an Apache License, Version 2.0 that can be\n * found in the LICENSE file.\n */\n\nimport angular from 'angular';\nimport { imagesURL, directivesModule } from '../common';\n\nconst\n  PRIVATE_PROPERTIES = {\n    showTimer: Symbol('showTimer'),\n    spinnerState: Symbol('spinnerState'),\n    timeout: Symbol('timeout')\n  },\n  NC_SPINNER_CONTROLLER_DI = ['$scope', '$timeout'];\n\nclass NcSpinnerController {\n\n  constructor($scope, $timeout) {\n\n    this[PRIVATE_PROPERTIES.showTimer] = null;\n    this[PRIVATE_PROPERTIES.spinnerState] = false;\n    this[PRIVATE_PROPERTIES.timeout] = $timeout;\n\n    $scope.$watch('ncSpinnerCtrl.spinnerShowTrigger', (showTrigger) => {\n      if (showTrigger) {\n        this.showSpinner();\n      } else {\n        this.hideSpinner();\n      }\n    });\n\n  }\n\n  showSpinner() {\n    const timeout = this[PRIVATE_PROPERTIES.timeout];\n\n    if (this[PRIVATE_PROPERTIES.showTimer] === null) {\n      this[PRIVATE_PROPERTIES.showTimer] = timeout(() => {\n        this[PRIVATE_PROPERTIES.spinnerState] = true;\n        this[PRIVATE_PROPERTIES.showTimer] = null;\n        this.spinnerOnChange({ state: true });\n      }, this.delay);\n    }\n  }\n\n  hideSpinner() {\n    const\n      showTimer = this[PRIVATE_PROPERTIES.showTimer],\n      timeout = this[PRIVATE_PROPERTIES.timeout];\n\n    if (showTimer != null) {\n      timeout.cancel(showTimer);\n      this[PRIVATE_PROPERTIES.showTimer] = null;\n    }\n\n    this[PRIVATE_PROPERTIES.spinnerState] = false;\n    this.spinnerOnChange({ state: false });\n  }\n\n  get delay() {\n    const delay = Number(this.spinnerDelay);\n    return angular.isNumber(delay) ? delay : 200;\n  }\n\n  get spinnerState() {\n    return this[PRIVATE_PROPERTIES.spinnerState];\n  }\n\n}\n\nNcSpinnerController.$inject = NC_SPINNER_CONTROLLER_DI;\n\nclass NcSpinner {\n\n  constructor() {\n\n    this.restrict = 'E';\n\n    this.scope = {\n      spinnerShowTrigger: '<',\n      spinnerDelay: '@',\n      spinnerOnChange: '&'\n    };\n\n    this.template = `\n      <div class=\"gf-form-label\" ng-if=\"ncSpinnerCtrl.spinnerState\">\n        <img src=${imagesURL}load_big.gif/>\n      </div>\n    `;\n\n    this.controller = NcSpinnerController;\n    this.controllerAs = 'ncSpinnerCtrl';\n    this.bindToController = true;\n\n  }\n\n}\n\nangular\n  .module(directivesModule)\n    .directive('ncSpinner', () => new NcSpinner());\n"]}